<!DOCTYPE html>
<html>
  <head>
    <title>IAT Example</title>
    <script src="jspsych-6.3.1/jspsych.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-iat-image.js"></script>
    <!-- <script src="jspsych-6.3.1/plugins/jspsych-iat-html.js"></script> -->
    <script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.3.1/plugins/jspsych-survey-multi-choice.js"></script>
    <!-- <script src="./jspsych-survey-multi-choice-select.js"></script> -->
    <script src="jspsych-6.3.1/plugins/jspsych-survey-text.js"></script>
    <link href="jspsych-6.3.1/css/jspsych.css" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
  </head>

  <body></body>
  <script>
    var script = document.createElement("script"); // create a script DOM node
    script.src = "./jspsych-iat-html-es.js"; // set its src to the provided URL
    document.head.appendChild(script);

    var script = document.createElement("script"); // create a script DOM node
    script.src = "./jspsych-survey-multi-choice-select.js"; // set its src to the provided URL
    document.head.appendChild(script);
    //hola mariapaz

    var instruction_block_1 = {
      type: "html-keyboard-response",
      stimulus: `
            <div style=' margin: auto;max-width:900px;'>    
                <p>
                Usted ha elegido completar el siguiente test: TAI Género-Ciencia<br>
                Es este estudio completará un Test de Asociación Implícita (TAI) en el que se le pedirá que clasifique imágenes y palabras en grupos lo más rápido posible.
                Además del TAI, hay algunas preguntas sobre sus creencias, actitudes y opiniones, y algunas preguntas demográficas estándar.
                Este estudio tardará cerca de 10 minutos en completarse.<br><br>
                Le agradecemos por estar acá<br><br>
                <b>Presione cualquier tecla para iniciar.<b>
                </p>
            </div>`,
      post_trial_gap: 500,
    };

    var target1_label = "Ciencias Sociales";
    var target2_label = "Ciencias Exactas";

    var target1 = [
      "Filosofía",
      "Educación Preescolar",
      "Arte",
      "Literatura",
      "Trabajo Social",
      "Historia",
    ];
    var target2 = [
      "Biología",
      "Física",
      "Química",
      "Matemáticas",
      "Geología",
      "Astronomía",
      "Ingeniería",
    ];

    var category1_label = "Masculino";
    var category2_label = "Femenino";

    var category1 = [
      "Hombre",
      "Niño",
      "Padre",
      "Masculino",
      "Abuelo",
      "Esposo",
      "Hijo",
      "Tío",
    ];

    var category2 = [
      "Niña",
      "Femenino",
      "Tía",
      "Hija",
      "Esposa",
      "Mujer",
      "Madre",
      "Abuela",
    ];

    var target1_category1_id = "sociales-masculino"; //counter-stereotypical
    var target2_category1_id = "exactas-masculino";  // stereotypical

    var instruction_block_2 = {
      type: "html-keyboard-response",
      stimulus: `
        <div style='max-width:900px; margin: auto;'>
            <p align="left">
                En el próximo paso, se le darán palabras para que clasifique en grupos. 
                El test requiere que clasifique los items tan rápido como le sea posible cometiendo la mínima cantidad de errores. 
                Si realiza el test muy despacio o si comete muchos errores va a dar un resultado ininterpretable.
                La lista a continuación menciona las categorías y los ítems que pertenecen a cada una de ellas.
                </p>
                <table class="redTable">
                    <thead>
                        <tr>
                            <th>Categoría</th>
                            <th>Items</th>
                            </tr>
                            </thead>
                            <tbody>
                        <tr>
                            <td>${category2_label}</td>
                            <td>${category2.join()}</td>
                            </tr>
                            <tr>
                                <td>${category1_label}</td>
                                <td>${category1.join()}</td>
                                </tr>
                                <tr>
                                    <td>${target1_label}</td>
                                    <td>${target1.join()}</td>
                                    </tr>
                                    <tr>
                                        <td>${target2_label}</td>
                                        <td>${target2.join()}</td>
                                        </tr>
                                        </tbody>
                                        </tr>
                                        </table>
                                        </p>
                                        <p align="left">
                                            Tenga en cuenta:<br>
                                            <ul>
                                                <li>Ubique sus dedos índice en las letras <span style='font-size:26px;'>E</span> y en la <span style='font-size:26px;'>I</span> para facilitar una respuesta rápida.</li>
                                                <li>Las palabras en la parte superior le informarán que palabras tiene que asociar.</li>
                                                <li><b>Cada palabra tiene una categoría correcta</b>, siendo la mayoría fáciles.</li>
                                                <li><b>El test no dará ningún resultado si va demasiado lento</b>, por lo que trate de ir tan rápido como le sea posible.</li>
                                                <li><b>Es de esperar cometa algunos errores</b> si va muy rápido, no hay ningún problema.</li>
                                                <li>Para mejores resultados, <b>evite las distracciones e intente concentrarse lo más posible.</b>.</li>
                                                <ul>
                                                    </p>
                                                    <br><br>
                                                    <b>Presione cualquier tecla para iniciar.<b>
                                                        </div>
                                                        `,
      post_trial_gap: 500,
    };

    var target1_left_target2_right = [
      ...jsPsych.randomization.factorial(
        {
          stimulus: target1,
          stim_key_association: ["left"],
        },
        1
      ),
      ...jsPsych.randomization.factorial(
        {
          stimulus: target2,
          stim_key_association: ["right"],
        },
        1
      ),
    ];

    var target1_right_target2_left = [
      ...jsPsych.randomization.factorial(
        {
          stimulus: target1,
          stim_key_association: ["right"],
        },
        1
      ),
      ...jsPsych.randomization.factorial(
        {
          stimulus: target2,
          stim_key_association: ["left"],
        },
        1
      ),
    ];

    var category1_left_category2_right = [
      ...jsPsych.randomization.factorial(
        {
          stimulus: category1,
          stim_key_association: ["left"],
        },
        1
      ),
      ...jsPsych.randomization.factorial(
        {
          stimulus: category2,
          stim_key_association: ["right"],
        },
        1
      ),
    ];

    var category1_right_category2_left = [
      ...jsPsych.randomization.factorial(
        {
          stimulus: category1,
          stim_key_association: ["right"],
        },
        1
      ),
      ...jsPsych.randomization.factorial(
        {
          stimulus: category2,
          stim_key_association: ["left"],
        },
        1
      ),
    ];

    var instructions_combined_example_scenario = `Por<br> ejemplo si la categoría <b>Ciencias Sociales</b> y <b>Masculino</b> 
            aparecen en diferentes partes de la pantalla, en significado de palabras <b>Tío</b> iría en la categoría <b>Masculino</b>, 
            no en la categoría <b>Ciencias Sociales</b>.`

    var subject_number = Math.floor(Math.random() * 4);
    //var subject_number = 0;

    switch (subject_number) {
        case 0: //Base case
            var initial_target_left_label = target1_label;
            var initial_target_right_label = target2_label;
            var initial_target_variables = target1_left_target2_right;
            var reversed_target_variables = target1_right_target2_left;

            var initial_category_left_label = category1_label;
            var initial_category_right_label = category2_label;
            var initial_category_variables = category1_left_category2_right;

            //Sociales + Masculino / Exactas + Femenino
            var combined_critical1_id = target1_category1_id; //initial_target_left_label + initial_category_left_label
            //Exactas + Masculino / Sociales + Femenino
            var combined_critical2_id = target2_category1_id; //initial_target_right_label + initial_category_right_label

            break;

        case 1: //Changed category sides from case 0
            var initial_target_left_label = target1_label;
            var initial_target_right_label = target2_label;
            var initial_target_variables = target1_left_target2_right;
            var reversed_target_variables = target1_right_target2_left;

            var initial_category_left_label = category2_label;
            var initial_category_right_label = category1_label;
            var initial_category_variables = category1_right_category2_left;

            var combined_critical1_id = target2_category1_id; //initial_target_left_label + initial_category_left_label
            var combined_critical2_id = target1_category1_id; //initial_target_right_label + initial_category_right_label

            break;
        
        case 2: //Base case with switched initial target
            var initial_target_left_label = target2_label;
            var initial_target_right_label = target1_label;
            var initial_target_variables = target1_right_target2_left;
            var reversed_target_variables = target1_left_target2_right;

            var initial_category_left_label = category1_label;
            var initial_category_right_label = category2_label;
            var initial_category_variables = category1_left_category2_right;

            var combined_critical1_id = target2_category1_id; //initial_target_left_label + initial_category_left_label
            var combined_critical2_id = target1_category1_id; //initial_target_right_label + initial_category_right_label

            break;

        case 3: //Case 1 with switched initial target
            var initial_target_left_label = target2_label;
            var initial_target_right_label = target1_label;
            var initial_target_variables = target1_right_target2_left;
            var reversed_target_variables = target1_left_target2_right;

            var initial_category_left_label = category2_label;
            var initial_category_right_label = category1_label;
            var initial_category_variables = category1_right_category2_left;

            var combined_critical1_id = target1_category1_id; //initial_target_left_label + initial_category_left_label
            var combined_critical2_id = target2_category1_id; //initial_target_right_label + initial_category_right_label

            break;
    }

    var instructions_initial_target = {
      type: "html-keyboard-response",
      stimulus: `<div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br><strong>${initial_target_left_label}</strong></div>
                            <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br><strong>${initial_target_right_label}</strong></div>
                            <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
                                Ponga su dedo medio o su dedo indice en la letra <b>E</b> y en la letra 
                                <b>I</b> de su teclado. En el borde superior van a aparecer palabras representando las categorías. 
                                Cuando el item pertenece a la categoría en la izquierda, presione la letra E; cuando el item pertenezca a una categoría en la derecha, presione la letra I. 
                Los items pertenecen a una sola categoría. Si cometió un error una <b>X</b> aparecerá en la pantalla. 
                Corrija el error presionando cualquier otra tecla.
                Este es un ejercicio de clasificación cronometrada. 
                <b>Realice la tarea tan rápido como pueda cometiendo la menor cantidad de errores posibles</b>. 
                Ir muy lento o cometer demasiados errores tendrá como consecuencia un resultado que no pueda ser interpretado.
                <br><br>
                <b>Presione cualquier tecla para continuar.<b>
                    </div>`,
    };

    var initial_target = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_left_label],
          right_category_label: [initial_target_right_label],
          response_ends_trial: true,
          data: { iat_type: "practice" },
        },
      ],
      timeline_variables: initial_target_variables,
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_initial_category = {
      type: "html-keyboard-response",
      stimulus: `<div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br><strong>${initial_category_left_label}</strong></div>
            <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br><strong>${initial_category_right_label}</strong></div>
            <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
                <b>Fíjese arriba, las categorías cambiaron.</b> 
                Los items para clasificar también cambiaron. Las reglas son las mismas.
                Cuando los items pertenecen a la categoría de la izquierda, 
                presione la tecla E; cuando el item pertenece a una categoría a la derecha, <br>presione la tecla I. 
                Los items pertenecen a una sola categoría. Una <span style='color:red;font-weight:bold'>X</span> 
                aparecerá después de un error, corrija el error presionando cualquier tecla.<b>
                    Sea tan rápido(a) como le sea posible.</b> <br><br>
                <b>Presione cualquier tecla para continuar.<b>
            </div>`,
    };

    var initial_category = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_category_left_label],
          right_category_label: [initial_category_right_label],
          response_ends_trial: true,
          data: { iat_type: "practice" },
        },
      ],
      timeline_variables: initial_category_variables,
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_combined_practice = {
      type: "html-keyboard-response",
      stimulus: `
        <div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br>
            <strong>${initial_target_left_label}</strong><br><br><strong>${initial_category_left_label}</strong></div>
        <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br>
            <strong>${initial_target_right_label}</strong><br><br><strong>${initial_category_right_label}</strong></div>
        <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
            <b>Fíjese arriba, las cuatro categorías que vío separadas ahora<br>aparecen juntas.</b> Recuerde, 
            cada item pertenece a un solo grupo. ${instructions_combined_example_scenario}            
            Use las teclas <b>E</b> e <b>I</b> para categorizar los cuatro grupos, 
            para corregir los errores presione cualquier tecla.
            <br><br>
            <b>Presione cualquier tecla para continuar.<b>
        </div>`,
    };

    var combined_practice = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_left_label, initial_category_left_label],
          right_category_label: [initial_target_right_label, initial_category_right_label],
          response_ends_trial: true,
          data: { iat_type: "practice" },
        },
      ],
      timeline_variables: [
        ...initial_category_variables,
        ...initial_target_variables,
      ],
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_combined_critical = {
      type: "html-keyboard-response",
      stimulus: `
        <div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br>
            <strong>${initial_target_left_label}</strong><br><br><strong>${initial_category_left_label}</strong></div>
        <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br>
            <strong>${initial_target_right_label}</strong><br><br><strong>${initial_category_right_label}</strong></div>
        <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
            <b>Clasifique las mismas cuatro categorías nuevamente.</b> Recuerde ir tan rápido como le sea posible, 
            cometiendo la menor cantidad de errores.
            Use las teclas <b>E</b> e <b>I</b> para categorizar los cuatro grupos, 
            para corregir los errores presione cualquier tecla.
            <br><br>
            <b>Presione cualquier tecla para continuar.<b>
        </div>`,
    };

    var combined_critical = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_left_label, initial_category_left_label],
          right_category_label: [initial_target_right_label, initial_category_right_label],
          response_ends_trial: true,
          data: { iat_type: combined_critical1_id },
        },
      ],
      timeline_variables: [
        ...initial_category_variables,
        ...initial_target_variables,
      ],
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_reversed_target = {
      type: "html-keyboard-response",
      stimulus: `<div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br><strong>${initial_target_right_label}</strong></div>
        <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br><strong>${initial_target_left_label}</strong></div>
        <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
            <b>Fíjese arriba, hay solo dos categorías y han cambiado las posiciones.</b> 
            El concepto que estaba anteriormente a la izquierda se encuentra ahora a la derecha, 
            y el que se encontraba a la derecha se encuentra ahora a la izquierda. 
            Practique con la nueva configuración.
            Use las letras <b>E</b> e <b>I</b> para categorizar los conceptos derechos e izquierdos; 
            para corregir los errores presione cualquier otra tecla.
            <br><br>
            <b>Presione cualquier tecla para continuar.<b>
        </div>`,
    };

    var reversed_target = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_right_label],
          right_category_label: [initial_target_left_label],
          response_ends_trial: true,
          data: { iat_type: "practice" },
        },
      ],
      timeline_variables: reversed_target_variables,
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_combined_practice2 = {
      type: "html-keyboard-response",
      stimulus: `
            <div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br>
                <strong>${initial_target_right_label}</strong><br><br><strong>${initial_category_left_label}</strong></div>
            <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br>
                <strong>${initial_target_left_label}</strong><br><br><strong>${initial_category_right_label}</strong></div>
            <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
                <b>Fíjese arriba, las cuatro categorías aparecen ahora en una nueva configuración.</b> 
                Recuerde, cada concepto pertenece a una sola categoría.
                Use las teclas <b>E</b> e <b>I</b> para categorizar los cuatro grupos, 
                para corregir los errores presione cualquier tecla.
                <br><br>
                <b>Presione cualquier tecla para continuar.<b>
            </div>`,
    };

    var combined_practice2 = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_right_label, initial_category_left_label],
          right_category_label: [initial_target_left_label, initial_category_right_label],
          response_ends_trial: true,
          data: { iat_type: "practice" },
        },
      ],
      timeline_variables: [
        ...initial_category_variables,
        ...reversed_target_variables,
      ],
      randomize_order: true,
      repetitions: 1,
    };

    var instructions_combined_critical2 = {
      type: "html-keyboard-response",
      stimulus: `
        <div style='position: absolute; top: 18%; left: 20%'>Presione E para:<br>
            <strong>${initial_target_right_label}</strong><br><br><strong>${initial_category_left_label}</strong></div>
        <div style='position: absolute; top: 18%; right: 20%'>Presione I para:<br>
            <strong>${initial_target_left_label}</strong><br><br><strong>${initial_category_right_label}</strong></div>
        <div style='position: relative; top: 42%; margin-left: auto; margin-right: auto;max-width:900px;'>
            <b>Clasifique las mismas cuatro categorías nuevamente.</b> 
            Recuerde ir tan rápido como le sea posible, cometiendo la menor cantidad de errores.
            Use las teclas <b>E</b> e <b>I</b> para categorizar los cuatro grupos, para corregir los errores presione cualquier tecla.
            <br><br>
            <b>Presione cualquier tecla para continuar.<b>
        </div>`,
    };

    var combined_critical2 = {
      timeline: [
        {
          type: "iat-html-es",
          stimulus: jsPsych.timelineVariable("stimulus"),
          stim_key_association: jsPsych.timelineVariable(
            "stim_key_association"
          ),
          html_when_wrong: '<span style="color: red; font-size: 80px">X</span>',
          bottom_instructions:
            "<p>Si presiona la tecla incorrecta, aparecerá una X roja. Presione cualquier tecla para continuar.</p>",
          force_correct_key_press: true,
          display_feedback: true,
          trial_duration: 3000, //Only if display_feedback is false
          left_category_key: "e",
          right_category_key: "i",
          left_category_label: [initial_target_right_label, initial_category_left_label],
          right_category_label: [initial_target_left_label, initial_category_right_label],
          response_ends_trial: true,
          data: { iat_type: combined_critical2_id },
        },
      ],
      timeline_variables: [
        ...initial_category_variables,
        ...reversed_target_variables,
      ],
      randomize_order: true,
      repetitions: 1,
    };

    var debrief_block = {
      type: "html-keyboard-response",
      stimulus: function () {
        // calculate D-score from https://faculty.washington.edu/agg/pdf/GB&N.JPSP.2003.pdf
        // first find mean RT
        //get counter-stereotypical data
        var target1_category1 = jsPsych.data   
          .get()
          .filter({ iat_type: target1_category1_id })
          .filterCustom(function (x) {
            return x.rt < 10000;
          });
        // calculate counter-stereotypical mean
        var mean_correct_responses_target1_category1 = target1_category1
          .filter({ correct: true })
          .select("rt")
          .mean();
        
        //get stereotypical data
        var target2_category1 = jsPsych.data
          .get()
          .filter({ iat_type: target2_category1_id })
          .filterCustom(function (x) {
            return x.rt < 10000;
          });

        //calculate stereotypical mean
        var mean_correct_responses_target2_category1 = target2_category1
          .filter({ correct: true })
          .select("rt")
          .mean();

        // get overall sd
        var sd = target1_category1
          .join(target2_category1)
          .filter({ correct: true })
          .select("rt")
          .sd();

        var d =
          (mean_correct_responses_target2_category1 -
            mean_correct_responses_target1_category1) /
          sd;
        
          jsPsych.data.addProperties({
              counter_stereotypical_mean: mean_correct_responses_target1_category1, 
              stereotypical_mean: mean_correct_responses_target2_category1,
              d_score : d, 
            });
        
          return `
            <p>¡Ha terminado el IAT! A continuación te mostramos sus resultados.</p>
            <p>Cuando los pares eran 
            ${target2_label}/${category1_label} y ${target1_label}/${category2_label}, le tomó un promedio de <strong> 
            ${Math.floor(mean_correct_responses_target2_category1)} ms</strong> responder. (Estereotípico)</p>
            
            <p>Cuando los pares eran 
            ${target1_label}/${category1_label} y ${target2_label}/${category2_label}, le tomó un promedio de <strong> 
            ${Math.floor(mean_correct_responses_target1_category1)} ms</strong> responder. (Contra-Estereotípico)</p>
            <p>Su puntaje del efecto D Cohen, una medida del efecto de la diferencia y variabilidad entre sus respuestas, 
            es <strong> ${d.toFixed(2)} </strong>.</p>
            <p>Para su referencia, el sitio del "Project Implicit IAT" de Harvard define puntajes D mayor que 0.15 un ligero sesgo, 
            puntajes mayor que 0.35 un sesgo moderado, y puntajes mayores a 0.65 un fuerte sesgo.</p>`;
      },
    };

    var escala1 = [
      "Muy positiva",
      "Ni positiva ni negativa",
      "Negativa",
      "Muy negativa",
    ];
    var escala2 = [
      "Altamente masculinas",
      "Moderadamente masculinas",
      "Ligeramente masculinas",
      "Ni masculinas ni femeninas",
      "Ligeramente femeninas",
      "Moderadamente femeninas",
      "Altamente femeninas",
    ];
    var explicits1 = {
      type: "survey-multi-choice",
      button_label: "Continuar",
      questions: [
        {
          prompt:
            "Calificá tu actitud hacia las Ciencias Básicas (Biología, Ciencias de la Salud, Física, Ingenierías, Química, etc)",
          name: "actitud_ciencias_basicas",
          options: escala1,
          required: true,
        },
        {
          prompt:
            "Actitud con respecto a las Ciencias Sociales (Arte, Comunicación, Derecho, Educación, Política, Psicología, etc)",
          name: "actitud_ciencias_sociales",
          options: escala1,
          required: true,
        },
        {
          prompt:
            "¿Cómo asociás las Ciencias Básicas (Biología, Ciencias de la Salud, Física, Ingenierías, Química, etc) como masculinas o femeninas?",
          name: "asocia_ciencias_basicas",
          options: escala2,
          required: true,
        },
        {
          prompt:
            "¿Cómo asocias las Ciencias Sociales  (Arte, Comunicación, Derecho, Educación, Política Psicología, etc) como masculinas o femeninas?",
          name: "asocia_ciencias_sociales",
          options: escala2,
          required: true,
        },
      ],
    };

    var escala3 = [
      "Extremadamente relevante",
      "Muy relevante",
      "Algo relevante",
      "Poco relevante",
      "Nada relevante",
    ];

    var explicits2 = {
        preamble: `
        <div style=' margin: auto;max-width:900px;'>
            <br><br>
            Según datos del Conare, en el 2015, solo el 32% de las mujeres se encontraban matriculadas 
            en ingenierías y un 29% ciencias básicas. Califique qué tan importante cree que es cada factor para explicar esta diferencia.
            <br><br>
            </div>`,
      type: "survey-multi-choice",
      questions: [
        {
          prompt:
            "La proporción de hombres y mujeres entre las personas con niveles más altos de habilidades matemáticas es distinta.",
          name: "conare1",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "En promedio, las mujeres y los hombres difieren en su voluntad por dedicar el tiempo requerido por las posiciones de alto rango.",
          name: "conare2",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "En promedio, las mujeres y hombres difieren naturalmente en su interés por las Ciencias Básicas.",
          name: "conare3",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "En promedio, los hombres y mujeres difieren en su voluntad por pasar tiempo con sus familias.",
          name: "conare4",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "Directa o indirectamente, los hombres y las mujeres tienden a recibir diferentes niveles de reconocimiento y estímulo para desarrollar su interés por las Ciencias Básicas.",
          name: "conare5",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "Directa o indirectamente, a nivel familiar, las mujeres tienden a recibir menos reconocimiento y estímulo para desarrollar su interés por las Ciencias Básicas.",
          name: "conare6",
          options: escala3,
          required: true,
        },
        {
          prompt:
            "En promedio, ya sea consciente o inconscientemente, los hombres son favorecidos en la contratación y promoción. ",
          name: "conare7",
          options: escala3,
          required: true,
        },
      ],
    };

    var explicits3 = {
      type: "survey-text",
      button_label: "Continuar",
      questions: [
        {
          prompt:
            "Escriba los nombres de los hombres líderes en algún campo de Ciencia, Tecnología, Ingeniería o Matemáticas (STEM) que puede nombrar:",
          columns: 6,
          required: true,
          name: "hombres_stem",
        },
        {
          prompt:
            "Indique los nombres de las mujeres lideresas en algún campo de Ciencia, Tecnología, Ingeniería o Matemáticas (STEM) que puede nombrar:",
          columns: 6,
          required: true,
          name: "mujeres_stem",
        },
      ],
      randomize_question_order: false,
    };

    var escala4 = [
      "Altamente probable",
      "Moderadamente probable",
      "Algo probable",
      "Ligeramente probable",
      "Improbable",
    ];
    var explicits4 = {
      type: "survey-multi-choice",
      button_label: "Continuar",
      questions: [
        {
          prompt:
            "Suponga que seleccionamos diez estudiantes hombres de noveno año de cualquier colegio de Costa Rica. ¿Qué tan probable es que tengan un promedio en matemática superior a 90?",
          name: "hombres_promedio_90",
          options: escala4,
          required: true,
        },
        {
          prompt:
            "Suponga que seleccionamos diez estudiantes mujeres de noveno año de cualquier colegio de Costa Rica. ¿Qué tan probable es que tengan un promedio en matemática superior a 90?",
          name: "mujeres_promedio_90",
          options: escala4,
          required: true,
        },
      ],
    };

    var escala5 = ["Me identifico", "No me identifico"];
    var explicits5 = {
      type: "survey-multi-choice",
      button_label: "Continuar",
      questions: [
        {
          prompt: "Mi interés por las Ciencias Básicas no es muy alto.",
          name: "interes_ciencias_basicas",
          options: escala5,
          required: true,
        },
        {
          prompt:
            "En promedio, suelo dedicar mucho tiempo a mi familia y tengo responsabilidades dentro de mi familia/hogar sobretodo relacionadas a tareas domésticas.",
          name: "familia_responsabilidades",
          options: escala5,
          required: true,
        },
        {
          prompt:
            "A lo largo de mi experiencia en el sistema de educación formal, he recibido poco reconocimiento y estímulo para desarrollar mi interés por las Ciencias Básicas",
          name: "reconocimiento_educativo",
          options: escala5,
          required: true,
        },
        {
          prompt:
            "Directa o indirectamente, en mi familia me han desmotivado con respecto a estudiar y desarrollarme profesionalmente en el área de ciencias básicas",
          name: "motivacion_familiar",
          options: escala5,
          required: true,
        },
        {
          prompt:
            "He percibido en mi entorno cercano e inclusive conmigo un trato menos favorable en la contratación y promoción hacia las mujeres.",
          name: "contratacion_promocion_personal",
          options: escala5,
          required: true,
        },
      ],
    };

    var demographics1 = {
      type: "survey-multi-choice",
      button_label: "Continuar",
      questions: [
        {
          prompt: "Sexo asignado al nacer:",
          name: "sexo",
          options: ["Mujer", "Hombre", "Intersex"],
          required: true,
        },
        {
          prompt: "Identidad de género actual:",
          name: "identidad_genero",
          options: [
            "Mujer",
            "Hombre",
            "Mujer trans",
            "Hombre trans",
            "No binario",
            "Queer",
            "Intersex",
            "Otro",
          ],
          required: true,
        },
        {
          prompt: "Etnia:",
          name: "etnia",
          options: [
            "Indígena",
            "Asiática",
            "Negra o Afrodescendiente",
            "Blanca / caucásica",
            "Mixta",
            "Otro / No sabe",
          ],
          required: true,
        },
        {
          prompt: "Te considerás",
          name: "religiosidad",
          options: [
            "Altamente religiosa",
            "Moderadamente religiosa",
            "Ligeramente religiosa",
            "Del todo no religiosa",
          ],
          required: true,
        },
        {
          prompt: "Estudiás o estudiaste en un",
          name: "estudio_tipo",
          options: [
            "Colegio público",
            "Colegio privado",
            "Colegio semi privado",
            "Instituto",
            "Bac.por madurez",
            "No estudió",
          ],
          required: true,
        },
        {
          prompt: "¿Cuál es tu ocupación?",
          name: "ocupacion",
          options: ["Estudia", "Trabaja", "Desempleada", "Ambos"],
          required: true,
        },
        {
        prompt: "Si estudiás en la Universidad, ¿estudiás alguna carrera STEAM?",
          name: "STEAM",
          options: ["Si", "No"],
          required: false,
    },
    {
        prompt: "Si no estudiás una carrera en STEAM o no querés estudiar una carrera en STEAM, ¿te sentís identificada con alguna de las siguientes opciones?",
          name: "noSTEAM",
          options: ["Razones familiares",
          "Me gustan carreras de otras áreas",
          "No me creo capaz porque tengo habilidades en otras áreas",
          "No me creo capaz porque soy mujer",
          "Creo que es muy difícil",
          "No me gusta que lleven tanta matemática",
          "Considero que son carreras de hombres",
          ],
          required: false,
    }
      ],
    };

    var demographics2 = {
      type: "survey-text",
      button_label: "Continuar",
      questions: [
        {
          prompt: "Edad (en años cumplidos):",
          columns: 3,
          required: true,
          name: "edad",
        },
        {
          prompt: "¿Cuál es la Edición de Mente en la que participaste?:",
          columns: 3,
          required: true,
          name: "mujeres_stem",
        },
        {
          prompt: "¿En qué área te querés desarrollar profesionalmente?:",
          columns: 3,
          required: true,
          name: "areaDeEstudio",
        },
        {
          prompt: "¿Para vos qué es el empoderamiento?",
          columns: 3,
          required: true,
          name: "definicionEmpoderamiento",
        },
      ],
      randomize_question_order: false,
    };


    var paises = ["Afganistán","Albania","Alemania","Andorra","Angola","Antigua y Barbuda","Arabia Saudita","Argelia","Argentina","Armenia","Australia","Austria","Azerbaiyán","Bahamas","Bangladés","Barbados","Baréin","Bélgica","Belice","Benín","Bielorrusia","Birmania","Bolivia","Bosnia y Herzegovina","Botsuana","Brasil","Brunéi","Bulgaria","Burkina Faso","Burundi","Bután","Cabo Verde","Camboya","Camerún","Canadá","Catar","Chad","Chile","China","Chipre","Ciudad del Vaticano","Colombia","Comoras","Corea del Norte","Corea del Sur","Costa de Marfil","Costa Rica","Croacia","Cuba","Dinamarca","Dominica","Ecuador","Egipto","El Salvador","Emiratos Árabes Unidos","Eritrea","Eslovaquia","Eslovenia","España","Estados Unidos","Estonia","Etiopía","Filipinas","Finlandia","Fiyi","Francia","Gabón","Gambia","Georgia","Ghana","Granada","Grecia","Guatemala","Guyana","Guinea","Guinea ecuatorial","Guinea-Bisáu","Haití","Honduras","Hungría","India","Indonesia","Irak","Irán","Irlanda","Islandia","Islas Marshall","Islas Salomón","Israel","Italia","Jamaica","Japón","Jordania","Kazajistán","Kenia","Kirguistán","Kiribati","Kuwait","Laos","Lesoto","Letonia","Líbano","Liberia","Libia","Liechtenstein","Lituania","Luxemburgo","Macedonia del Norte","Madagascar","Malasia","Malaui","Maldivas","Malí","Malta","Marruecos","Mauricio","Mauritania","México","Micronesia","Moldavia","Mónaco","Mongolia","Montenegro","Mozambique","Namibia","Nauru","Nepal","Nicaragua","Níger","Nigeria","Noruega","Nueva Zelanda","Omán","Países Bajos","Pakistán","Palaos","Panamá","Papúa Nueva Guinea","Paraguay","Perú","Polonia","Portugal","Reino Unido","República Centroafricana","República Checa","República del Congo","República Democrática del Congo","República Dominicana","Ruanda","Rumanía","Rusia","Samoa","San Cristóbal y Nieves","San Marino","San Vicente y las Granadinas","Santa Lucía","Santo Tomé y Príncipe","Senegal","Serbia","Seychelles","Sierra Leona","Singapur","Siria","Somalia","Sri Lanka","Suazilandia","Sudáfrica","Sudán","Sudán del Sur","Suecia","Suiza","Surinam","Tailandia","Tanzania","Tayikistán","Timor Oriental","Togo","Tonga","Trinidad y Tobago","Túnez","Turkmenistán","Turquía","Tuvalu","Ucrania","Uganda","Uruguay","Uzbekistán","Vanuatu","Venezuela","Vietnam","Yemen","Yibuti","Zambia","Zimbabue"];

    var provincias = ['Alajuela','Cartago','Guanacaste','Heredia','Limón','Puntarenas','San José'];

    var cantones = {
        "Alajuela" : ['Alajuela','San Ramón','Grecia','San Mateo','Atenas','Naranjo','Palmares','Poás','Orotina','San Carlos','Zarcero','Sarchí','Upala','Los Chiles','Guatuso','Río Cuarto'],
        "Heredia" : ['Heredia','Barva','Santo Domingo','Santa Bárbara','San Rafael','San Isidro','Belén','Flores','San Pablo','Sarapiquí'],
        "Guanacaste" : ['Liberia','Nicoya','Santa Cruz','Bagaces','Carrillo','Cañas','Abangares','Tilarán','Nandayure','La Cruz','Hojancha'],
        "SanJose" : ['San Jose','Escazú','Desamparados','Puriscal','Tarrazú','Aserrí','Mora','Goicoechea','Santa Ana','Alajuelita','Vásquez de Coronado','Acosta','Tibás','Moravia','Montes de Oca','Turrubares','Dota','Currridabat','Pérez Zeledón','León Cortés'],
        "Limon" : ['Limón','Pococí','Siquirres','Talamanca','Matina','Guácimo'],
        "Puntarenas" : ['Puntarenas','Esparza','Buenos Aires','Montes de Oro','Osa','Quepos','Golfito','Coto Brus','Parrita','Corredores','Garabito'],
        "Cartago" : ['Cartago','Paraíso','La Unión','Jiménez','Turrialba','Alvarado','Oreamuno','El Guarco']
    };

    var demographics3= {
      type: "survey-multi-choice-select",
      button_label: "Continuar",
      questions: [
        {
          prompt: "¿Cuál es tu país de nacionalidad?",
          name: "pais_nacionalidad",
          options: paises,
          default_value: 'Costa Rica',
          required: true,
        },
        {
          prompt: "¿Cuál es tu país de residencia?",
          name: "pais_residencia",
          options: paises,
          default_value: 'Costa Rica',
          required: true,
        },
        {
          prompt: "¿En qué provincia vivís?",
          name: "provincia",
          options: provincias,
          required: true,
        },
        {
          prompt: "¿En cual cantón habitás?",
          name: "canton",
          options: function(){
              var province_data = jsPsych.data.get().last(1).values()[0]['response']['provincia'];
              console.log(province_data);
              switch (province_data){
                case 'Alajuela':
                      return cantones.Alajuela;
                case 'Heredia':
                        return cantones.Heredia;
                case 'Cartago':
                        return cantones.Cartago;
                case 'Puntarenas':
                        return cantones.Puntarenas;
                case 'Limón':
                        return cantones.Limon;
                case 'Guanacaste':
                        return cantones.Guanacaste;
                case 'San José':
                        return cantones.SanJose;
              }
          },
          required: true,
        },
      ],
    };

    
    var demographics4 = {
      type: "survey-text",
      button_label: "Continuar",
      questions: [
        {
          prompt: "¿En qué área te querés desarrollar profesionalmente?:",
          columns: 3,
          required: true,
          name: "areaDeEstudio",
        },
        {
          prompt: "¿Para vos qué es el empoderamiento?",
          columns: 3,
          required: true,
          name: "definicionEmpoderamiento",
        },
        {
          prompt: "¿Para vos qué es el empoderamiento?",
          columns: 3,
          required: true,
          name: "definicionEmpoderamiento",
        },
      ]
    };


    var demographics5 = {
    type: 'survey-multi-select',
    button_label: "Continuar",
    questions: [
      {
        prompt: "¿Cuál es tu motivación para ser una MenTe?", 
        options: ["Porque tengo amigas graduadas del programa", 
          "Porque quiero desarrollar habilidades técnicas y estratégicas en el área de STEAM",
          "Porque quiero ser una mujer en STEAM",
          "Porque quiero aprender acerca de feminismo",
          "Porque quiero aprender de empoderamiento femenino",
          "Para tener acceso a oportunidad académicas y laborales"],
        horizontal: true,
        required: true,
        name: 'motivacion'
      }, 
    ], 
    randomize_question_order: true
};

        var demographics6 = {
      type: "survey-multi-choice-select",
      button_label: "Continuar",
      questions: [
        {
          prompt: "El principal sustento de mi hogar es",
          name: "sustento",
          options: [
            "Mi mamá",
            "Mi papá",
            "Ambos(rol compartido)",
            "Yo",
            "Mi pareja",
            "Otro",
          ],
          required: true,
        },
        {
          prompt: "¿Tenés hijos o hijas?",
          name: "hijes",
          options: ["Si", "No"],
          required: true,
        },
        {
          prompt: "¿Tenés alguna discapacidad?",
          name: "discapacidad",
          options: ["Si", "No"],
          required: true,
        },
        {
          prompt: "¿Habías aplicado anteriormente al programa?",
          name: "previousApplicant",
          options: ["Si", "No"],
          required: true,
        },
        {
        prompt: "¿Cuántos Test de Asociación Implícita (TAI) has hecho antes?",
          name: "tai_previos",
          options: ["0", "1", "2", "3 - 5", "6 +"],
          required: true,
        },
      ],
    };


    var timeline = [];
    // timeline.push(instruction_block_1);
    // timeline.push(instruction_block_2);
    // timeline.push(instructions_initial_target);
    // timeline.push(initial_target);
    // timeline.push(instructions_initial_category);
    // timeline.push(initial_category);
    // timeline.push(instructions_combined_practice);
    // timeline.push(combined_practice);
    // timeline.push(instructions_combined_critical);
    // timeline.push(combined_critical);
    // timeline.push(instructions_reversed_target);
    // timeline.push(reversed_target);
    // timeline.push(instructions_combined_practice2);
    // timeline.push(combined_practice2);
    // timeline.push(instructions_combined_critical2);
    // timeline.push(combined_critical2);
    // timeline.push(explicits1);
    // timeline.push(explicits2);
    // timeline.push(explicits3);
    // timeline.push(explicits4);
    // timeline.push(explicits5);
    // timeline.push(demographics1);
    // timeline.push(demographics2);
    timeline.push(demographics3);  
    // timeline.push(demographics4); // cantones (debe ir despues de demographics 3)
    // timeline.push(demographics5); // paises y provincia
    // timeline.push(demographics6);
    // timeline.push(debrief_block);

    jsPsych.init({
      timeline: timeline,
      on_finish: function () {
        jsPsych.data.displayData();
      },
    });
  </script>
</html>
